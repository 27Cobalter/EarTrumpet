<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:actions="clr-namespace:EarTrumpet_Actions.DataModel.Actions"
                    xmlns:avm="clr-namespace:EarTrumpet_Actions.ViewModel.Actions"
                    xmlns:conditions="clr-namespace:EarTrumpet_Actions.DataModel.Conditions"
                    xmlns:conv="clr-namespace:EarTrumpet.UI.Converters;assembly=EarTrumpet"
                    xmlns:cvm="clr-namespace:EarTrumpet_Actions.ViewModel.Conditions"
                    xmlns:dm="clr-namespace:EarTrumpet_Actions.DataModel"
                    xmlns:local="clr-namespace:EarTrumpet_Actions"
                    xmlns:resx="clr-namespace:EarTrumpet_Actions.Properties"
                    xmlns:svc="clr-namespace:EarTrumpet.UI.Services;assembly=EarTrumpet"
                    xmlns:tvm="clr-namespace:EarTrumpet_Actions.ViewModel.Triggers"
                    xmlns:vm="clr-namespace:EarTrumpet_Actions.ViewModel">

    <conv:InvertableVisibilityConverter x:Key="addonVisConverter" />

    <DataTemplate DataType="{x:Type dm:Option}">
        <TextBlock VerticalAlignment="Center" Text="{Binding DisplayName}" />
    </DataTemplate>

    <DataTemplate x:Key="PartMenuItemTemplate">
        <ContentControl VerticalAlignment="Center" Content="{Binding Description}" />
    </DataTemplate>

    <DataTemplate x:Key="PartListItemTemplate">
        <Grid Margin="12">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <Button Grid.Row="1"
                    Grid.Column="2"
                    Command="{Binding Open}"
                    CommandParameter="{Binding}"
                    Content="{x:Static resx:Resources.EditText}"
                    Visibility="{Binding IsExpanded, Converter={StaticResource visConverter}, ConverterParameter=Normal}" />

            <Button Grid.Row="1"
                    Grid.Column="3"
                    Command="{Binding Remove}"
                    CommandParameter="{Binding}"
                    Content="{x:Static resx:Resources.RemoveText}"
                    Visibility="{Binding IsExpanded, Converter={StaticResource visConverter}, ConverterParameter=Normal}" />

            <TextBlock Margin="0,0,12,0"
                       VerticalAlignment="Center"
                       FontSize="14"
                       FontWeight="Bold"
                       Text="{Binding Verb}" />

            <TextBlock Grid.Column="1"
                       VerticalAlignment="Center"
                       Text="{Binding CurrentDescription}" />
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="AddPartItemTemplate">
        <Grid>
            <Button Background="Transparent"
                    BorderThickness="0"
                    Command="{Binding RelativeSource={RelativeSource AncestorType=ListView}, Path=DataContext.Select}"
                    CommandParameter="{Binding}" />
            <TextBlock Margin="12"
                       IsHitTestVisible="False"
                       Text="{Binding Description}" />
        </Grid>
    </DataTemplate>

    <DataTemplate DataType="{x:Type vm:AddNewPartViewModel}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <ListView ItemTemplate="{StaticResource AddPartItemTemplate}"
                      ItemsSource="{Binding Triggers}"
                      Style="{DynamicResource SettingsListView}" />
            <ListView Grid.Row="1"
                      ItemTemplate="{StaticResource AddPartItemTemplate}"
                      ItemsSource="{Binding Conditions}"
                      Style="{DynamicResource SettingsListView}" />
            <ListView Grid.Row="2"
                      ItemTemplate="{StaticResource AddPartItemTemplate}"
                      ItemsSource="{Binding Actions}"
                      Style="{DynamicResource SettingsListView}" />
        </Grid>
    </DataTemplate>

    <DataTemplate DataType="{x:Type vm:EarTrumpetActionViewModel}">
        <Grid Margin="12"
              MinWidth="400"
              MinHeight="400">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <TextBox Grid.ColumnSpan="2"
                     FontSize="24"
                     Text="{Binding DisplayName, Mode=TwoWay}" />

            <ListView Grid.Row="1"
                      Grid.ColumnSpan="2"
                      IsSynchronizedWithCurrentItem="True"
                      ItemTemplate="{StaticResource PartListItemTemplate}"
                      ItemsSource="{Binding Parts}"
                      SelectedItem="{Binding Selected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                      Style="{DynamicResource SettingsListView}" />

            <Button Grid.Row="4"
                    Margin="0,6,0,0"
                    Grid.ColumnSpan="3"
                    Command="{Binding AddPart}"
                    Content="Add triggers, conditions and actions"
                    Style="{DynamicResource AddButtonStyle}" />
        </Grid>
    </DataTemplate>

    <DataTemplate DataType="{x:Type vm:ActionsEditorViewModel}">
        <StackPanel Margin="12" Orientation="Vertical"
                    MinWidth="400"
                    MinHeight="400">
            <TextBlock Style="{DynamicResource HeadingText}" Text="{x:Static resx:Resources.MyActionsText}" />
            <ListView ItemsSource="{Binding Actions}"
                      SelectedItem="{Binding SelectedAction, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                      SelectionMode="Single"
                      Style="{DynamicResource SettingsListView}">
                <ListView.ItemTemplate>
                    <DataTemplate DataType="{x:Type vm:EarTrumpetActionViewModel}">
                        <Grid Margin="12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <Button Grid.Row="1"
                                    Grid.Column="1"
                                    Command="{Binding Open}"
                                    Content="{x:Static resx:Resources.EditText}"
                                    Visibility="{Binding IsExpanded, Converter={StaticResource visConverter}, ConverterParameter=Normal}" />

                            <Button Grid.Row="1"
                                    Grid.Column="2"
                                    Command="{Binding Remove}"
                                    Content="{x:Static resx:Resources.RemoveText}"
                                    Visibility="{Binding IsExpanded, Converter={StaticResource visConverter}, ConverterParameter=Normal}" />

                            <TextBlock VerticalAlignment="Center" Text="{Binding DisplayName}" />
                        </Grid>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
            <Button Command="{Binding New}"
                    Margin="0,6,0,0"
                    Content="{x:Static resx:Resources.NewActionText}"
                    Style="{DynamicResource AddButtonStyle}" />
        </StackPanel>
    </DataTemplate>

    <!--  Triggers  -->

    <DataTemplate DataType="{x:Type tvm:EventTriggerViewModel}">
        <Grid Margin="12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <TextBlock VerticalAlignment="Center" Text="{Binding CurrentDescription}" />
            <ComboBox Grid.Row="1"
                      IsSynchronizedWithCurrentItem="True"
                      ItemsSource="{Binding Option.All}"
                      SelectedItem="{Binding Option.Selected, Mode=TwoWay}" />
        </Grid>
    </DataTemplate>

    <DataTemplate DataType="{x:Type tvm:AudioDeviceEventTriggerViewModel}">
        <Grid Margin="12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <TextBlock VerticalAlignment="Center" Text="{Binding CurrentDescription}" />
            <ComboBox Grid.Row="1"
                      IsSynchronizedWithCurrentItem="True"
                      ItemsSource="{Binding Device.All}"
                      SelectedItem="{Binding Device.Selected, Mode=TwoWay}" />
            <ComboBox Grid.Row="2"
                      IsSynchronizedWithCurrentItem="True"
                      ItemsSource="{Binding Option.All}"
                      SelectedItem="{Binding Option.Selected, Mode=TwoWay}" />
        </Grid>
    </DataTemplate>

    <DataTemplate DataType="{x:Type tvm:AudioDeviceSessionEventTriggerViewModel}">
        <Grid Margin="12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <TextBlock VerticalAlignment="Center" Text="{Binding CurrentDescription}" />
            <ComboBox Grid.Row="1"
                      IsSynchronizedWithCurrentItem="True"
                      ItemsSource="{Binding App.All}"
                      SelectedItem="{Binding App.Selected, Mode=TwoWay}" />
            <ComboBox Grid.Row="2"
                      IsSynchronizedWithCurrentItem="True"
                      ItemsSource="{Binding Device.All}"
                      SelectedItem="{Binding Device.Selected, Mode=TwoWay}" />
            <ComboBox Grid.Row="3"
                      IsSynchronizedWithCurrentItem="True"
                      ItemsSource="{Binding Option.All}"
                      SelectedItem="{Binding Option.Selected, Mode=TwoWay}" />
        </Grid>
    </DataTemplate>

    <DataTemplate DataType="{x:Type tvm:ProcessTriggerViewModel}">
        <Grid Margin="12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <TextBlock VerticalAlignment="Center" Text="{Binding CurrentDescription}" />

            <TextBlock Grid.Row="1" Text="{Binding Text.PromptText}" />
            <TextBox Grid.Row="2" Text="{Binding Text.Text, Mode=TwoWay}" />

            <ComboBox Grid.Row="3"
                      IsSynchronizedWithCurrentItem="True"
                      ItemsSource="{Binding Option.All}"
                      SelectedItem="{Binding Option.Selected, Mode=TwoWay}" />
        </Grid>
    </DataTemplate>

    <DataTemplate DataType="{x:Type tvm:HotkeyTriggerViewModel}">
        <Grid Margin="12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <TextBlock VerticalAlignment="Center" Text="{Binding CurrentDescription}" />
            <Button Grid.Row="1"
                    Command="{Binding SetHotkey}"
                    CommandParameter="{Binding}"
                    Content="{Binding HotkeyText}" />
        </Grid>
    </DataTemplate>

    <!--  Conditions  -->

    <DataTemplate DataType="{x:Type cvm:DefaultPlaybackDeviceConditionViewModel}">
        <Grid Margin="12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <TextBlock VerticalAlignment="Center" Text="{Binding CurrentDescription}" />
            <ComboBox Grid.Row="1"
                      IsSynchronizedWithCurrentItem="True"
                      ItemsSource="{Binding Device.All}"
                      SelectedItem="{Binding Device.Selected, Mode=TwoWay}" />
        </Grid>
    </DataTemplate>

    <DataTemplate DataType="{x:Type cvm:ProcessConditionViewModel}">
        <Grid Margin="12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <TextBlock VerticalAlignment="Center" Text="{Binding CurrentDescription}" />
            <TextBlock Grid.Row="1" Text="{Binding Text.PromptText}" />
            <TextBox Grid.Row="2" Text="{Binding Text.Text, Mode=TwoWay}" />
            <ComboBox Grid.Row="3"
                      IsSynchronizedWithCurrentItem="True"
                      ItemsSource="{Binding Option.All}"
                      SelectedItem="{Binding Option.Selected, Mode=TwoWay}" />
        </Grid>
    </DataTemplate>

    <DataTemplate DataType="{x:Type cvm:VariableConditionViewModel}">
        <Grid Margin="12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <TextBlock VerticalAlignment="Center" Text="{Binding CurrentDescription}" />
            <TextBlock Grid.Row="1" Text="{Binding Text.PromptText}" />
            <TextBox Grid.Row="2" Text="{Binding Text.Text, Mode=TwoWay}" />
            <ComboBox Grid.Row="3"
                      IsSynchronizedWithCurrentItem="True"
                      ItemsSource="{Binding Option.All}"
                      SelectedItem="{Binding Option.Selected, Mode=TwoWay}" />
        </Grid>
    </DataTemplate>

    <!--  Actions  -->

    <DataTemplate DataType="{x:Type avm:SetDefaultDeviceActionViewModel}">
        <Grid Margin="12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <TextBlock VerticalAlignment="Center" Text="{Binding CurrentDescription}" />
            <ComboBox Grid.Row="1"
                      IsSynchronizedWithCurrentItem="True"
                      ItemsSource="{Binding Device.All}"
                      SelectedItem="{Binding Device.Selected, Mode=TwoWay}" />
        </Grid>
    </DataTemplate>

    <DataTemplate DataType="{x:Type avm:ChangeAppVolumeActionViewModel}">
        <Grid Margin="12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <TextBlock VerticalAlignment="Center" Text="{Binding CurrentDescription}" />
            <ComboBox Grid.Row="1"
                      IsSynchronizedWithCurrentItem="True"
                      ItemsSource="{Binding App.All}"
                      SelectedItem="{Binding App.Selected, Mode=TwoWay}" />
            <ComboBox Grid.Row="2"
                      IsSynchronizedWithCurrentItem="True"
                      ItemsSource="{Binding Device.All}"
                      SelectedItem="{Binding Device.Selected, Mode=TwoWay}" />
            <ComboBox Grid.Row="3"
                      IsSynchronizedWithCurrentItem="True"
                      ItemsSource="{Binding Option.All}"
                      SelectedItem="{Binding Option.Selected, Mode=TwoWay}" />

            <Slider Grid.Row="4"
                    Maximum="100"
                    Minimum="0"
                    Style="{DynamicResource VolumeSliderStyle}"
                    Visibility="{Binding IsShowingVolume, Converter={StaticResource addonVisConverter}, ConverterParameter=Normal}"
                    Value="{Binding Volume.Volume, Mode=TwoWay}" />
        </Grid>
    </DataTemplate>

    <DataTemplate DataType="{x:Type avm:ChangeDeviceVolumeActionViewModel}">
        <Grid Margin="12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <TextBlock VerticalAlignment="Center" Text="{Binding CurrentDescription}" />
            <ComboBox Grid.Row="2"
                      IsSynchronizedWithCurrentItem="True"
                      ItemsSource="{Binding Device.All}"
                      SelectedItem="{Binding Device.Selected, Mode=TwoWay}" />
            <ComboBox Grid.Row="3"
                      IsSynchronizedWithCurrentItem="True"
                      ItemsSource="{Binding Option.All}"
                      SelectedItem="{Binding Option.Selected, Mode=TwoWay}" />

            <Slider Grid.Row="4"
                    Maximum="100"
                    Minimum="0"
                    Style="{DynamicResource VolumeSliderStyle}"
                    Visibility="{Binding IsShowingVolume, Converter={StaticResource addonVisConverter}, ConverterParameter=Normal}"
                    Value="{Binding Volume.Volume, Mode=TwoWay}" />
        </Grid>
    </DataTemplate>

    <DataTemplate DataType="{x:Type avm:SetVariableActionViewModel}">
        <Grid Margin="12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <TextBlock VerticalAlignment="Center" Text="{Binding CurrentDescription}" />
            <TextBlock Grid.Row="1" Text="{Binding Text.PromptText}" />
            <TextBox Grid.Row="2" Text="{Binding Text.Text, Mode=TwoWay}" />
            <ComboBox Grid.Row="3"
                      IsSynchronizedWithCurrentItem="True"
                      ItemsSource="{Binding Option.All}"
                      SelectedItem="{Binding Option.Selected, Mode=TwoWay}" />
        </Grid>
    </DataTemplate>

    <DataTemplate DataType="{x:Type avm:SetThemeActionViewModel}">
        <Grid Margin="12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <TextBlock VerticalAlignment="Center" Text="{Binding CurrentDescription}" />

            <ComboBox Grid.Row="1"
                      IsSynchronizedWithCurrentItem="True"
                      ItemsSource="{Binding Option.All}"
                      SelectedItem="{Binding Option.Selected, Mode=TwoWay}" />
        </Grid>
    </DataTemplate>

    <DataTemplate DataType="{x:Type avm:SetAddonEarTrumpetSettingsActionViewModel}">
        <Grid Margin="12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <TextBlock VerticalAlignment="Center" Text="{Binding CurrentDescription}" />
            <ComboBox Grid.Row="1"
                      IsSynchronizedWithCurrentItem="True"
                      ItemsSource="{Binding Option1.All}"
                      SelectedItem="{Binding Option1.Selected, Mode=TwoWay}" />
            <ComboBox Grid.Row="2"
                      IsSynchronizedWithCurrentItem="True"
                      ItemsSource="{Binding Option2.All}"
                      SelectedItem="{Binding Option2.Selected, Mode=TwoWay}" />
        </Grid>
    </DataTemplate>
</ResourceDictionary>